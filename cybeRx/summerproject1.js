var symptomy = [{"ID": 188,"Name": "Abdominal guarding"},{"ID": 10, "Name": "Abdominal pain"},{"ID": 223,"Name": "Abdominal pain associated with menstruation"},{"ID": 984,"Name": "Absence of a pulse"},
  {"ID": 974,"Name": "Aggressiveness"},{"ID": 981,"Name": "Agitation"},{"ID": 996,"Name": "Ankle deformity"},{"ID": 147,"Name": "Ankle swelling"},{"ID": 238,"Name": "Anxiety"},{"ID": 1009,"Name": "Arm pain"},{"ID": 971,"Name": "Arm swelling"},{"ID": 998,"Name": "Back deformity"},
  {"ID": 104,"Name": "Back pain"},  {   "ID": 180,    "Name": "Black stools"  },  {    "ID": 57,    "Name": "Blackening of vision"  },  {    "ID": 24,    "Name": "Blackhead"
  },{"ID": 284,"Name": "Bleeding from vagina"},{"ID": 176,"Name": "Bleeding in the conjunctiva of the eye"},{"ID": 48,"Name": "Bloated feeling in the stomach"
  },{"ID": 190,"Name": "Blood in stool"},{"ID": 233,"Name": "Bloody cough"},{"ID": 991,"Name": "Blue colored skin"},{"ID": 240,"Name": "Blue spot on skin"},{"ID": 77,"Name": "Blurred vision"},{
    "ID": 239,"Name": "Bold area among hair on the head"},{"ID": 156,"Name": "Bone fracture"},{"ID": 250,"Name": "Breathing-related pains"},{"ID": 979,"Name": "Brittleness of nails"},
  {"ID": 192,"Name": "Bulging abdominal wall"},{"ID": 75,"Name": "Burning eyes"},{"ID": 46,"Name": "Burning in the throat"},{"ID": 288,"Name": "Burning nose"},{"ID": 107,"Name": "Burning sensation when urinating"}, {"ID": 91,"Name": "Changes in the nails"},
  {"ID": 170,"Name": "Cheek swelling"},{"ID": 17,"Name": "Chest pain"},{"ID": 31,"Name": "Chest tightness"},{"ID": 175,"Name": "Chills"},{"ID": 218,"Name": "Coarsening of the skin structure"},
  {"ID": 89,"Name": "Cold feet"},{"ID": 978,"Name": "Cold hands"},{"ID": 139,"Name": "Cold sweats"},{"ID": 15,"Name": "Cough"},{"ID": 228,"Name": "Cough with sputum"},
  {"ID": 94,"Name": "Cramps"},{"ID": 49,"Name": "Cravings"},{"ID": 134,"Name": "Crusting"},{"ID": 260,"Name": "Curvature of the spine"},{"ID": 108,"Name": "Dark urine"},{"ID": 163,"Name": "Decreased urine stream"},
  {"ID": 165,"Name": "Delayed start to urination"},{"ID": 50,"Name": "Diarrhea"},{"ID": 79,"Name": "Difficult defecation"},{"ID": 126,"Name": "Difficulty in finding words"},{"ID": 98,"Name": "Difficulty in speaking"},
  {"ID": 93,"Name": "Difficulty in swallowing"},{"ID": 53,"Name": "Difficulty to concentrate"},{"ID": 1007,"Name": "Difficulty to learn"},{"ID": 1005,"Name": "Difficulty with gait"},{"ID": 216,"Name": "Discoloration of nails"},{"ID": 128,"Name": "Disorientation regarding time or place"},
  {"ID": 989,"Name": "Distended abdomen"},{"ID": 207,"Name": "Dizziness"},{"ID": 71,"Name": "Double vision"},{"ID": 270,"Name": "Double vision, acute-onset"},{"ID": 162,"Name": "Dribbling after urination"},
  {"ID": 244,"Name": "Drooping eyelid"},{"ID": 43,"Name": "Drowsiness"},{"ID": 273,"Name": "Dry eyes"},
  {"ID": 272,"Name": "Dry mouth"},{"ID": 151,"Name": "Dry skin"},{"ID": 87,"Name": "Earache"},{"ID": 92,"Name": "Early satiety"},{"ID": 1011,"Name": "Elbow pain"},{"ID": 1006,"Name": "Enlarged calf"},
  {"ID": 242,"Name": "Eye blinking"},{"ID": 287,"Name": "Eye pain"},{"ID": 33,"Name": "Eye redness"},{"ID": 208,"Name": "Eyelid swelling"},{"ID": 209,"Name": "Eyelids sticking together"},{"ID": 219,"Name": "Face pain"
  },{"ID": 246,"Name": "Facial paralysis"},{"ID": 970,"Name": "Facial swelling"},{"ID": 153,"Name": "Fast, deepened breathing"},{"ID": 83,"Name": "Fatty defecation"},{"ID": 982,"Name": "Feeling faint"},{"ID": 1014,"Name": "Feeling ill"},
  {"ID": 76,"Name": "Feeling of foreign body in the eye"},{"ID": 86,"Name": "Feeling of pressure in the ear"},{"ID": 164,"Name": "Feeling of residual urine"},{"ID": 145,"Name": "Feeling of tension in the legs"},
  {"ID": 11,"Name": "Fever"},{"ID": 995,"Name": "Finger deformity"},{"ID": 1013,"Name": "Finger pain"},{"ID": 1012,"Name": "Finger swelling"},{"ID": 214,"Name": "Flaking skin"},{"ID": 245,"Name": "Flaking skin on the head"},
  {"ID": 154,"Name": "Flatulence"},{"ID": 255,"Name": "Foot pain"},{"ID": 1002,"Name": "Foot swelling"},{"ID": 125,"Name": "Forgetfulness"},{"ID": 62,"Name": "Formation of blisters on a skin area"},
  {"ID": 84,"Name": "Foul smelling defecation"},{"ID": 59,"Name": "Frequent urination"},{"ID": 110,"Name": "Genital warts"},{"ID": 152,"Name": "Hair loss"},{"ID": 976,"Name": "Hallucination"},{"ID": 72,"Name": "Halo"},
  {"ID": 186,"Name": "Hand pain"},{"ID": 148,"Name": "Hand swelling"},{"ID": 80,"Name": "Hard defecation"},{"ID": 184,"Name": "Hardening of the skin"},{"ID": 9,"Name": "Headache"},{"ID": 206,"Name": "Hearing loss"},{
    "ID": 985,"Name": "Heart murmur"},{"ID": 45,"Name": "Heartburn"},{"ID": 122,"Name": "Hiccups"},{"ID": 993,"Name": "Hip deformity"},{"ID": 196,"Name": "Hip pain"},{"ID": 121,"Name": "Hoarseness"},
  {"ID": 149,"Name": "Hot flushes"},{"ID": 197,"Name": "Immobilization"},{"ID": 120,"Name": "Impaired balance"},{"ID": 90,"Name": "Impaired hearing"},{"ID": 70,"Name": "Impaired light-dark adaptation"},{"ID": 113,"Name": "Impairment of male potency"},
  {"ID": 81,"Name": "Incomplete defecation"},{"ID": 131,"Name": "Increased appetite"},{"ID": 262, "Name": "Increased drive"},{"ID": 204,"Name": "Increased salivation"},{"ID": 40,
  "Name": "Increased thirst"},{"ID": 220,"Name": "Increased touch sensitivity"},{"ID": 39,"Name": "Increased urine quantity"},{"ID": 257,"Name": "Involuntary movements"},{"ID": 986,
"Name": "Irregular heartbeat"},{"ID": 65,"Name": "Irregular mole"},{"ID": 73,"Name": "Itching eyes"},{"ID": 88,"Name": "Itching in the ear"},{"ID": 973,"Name": "Itching in the mouth or throat"},
  {"ID": 96,"Name": "Itching in the nose"},{"ID": 21,"Name": "Itching of skin"},{"ID": 999,"Name": "Itching of the anus"},{"ID": 247,"Name": "Itching on head"},{"ID": 268,"Name": "Itching or burning in the genital area"},
  {"ID": 194,"Name": "Joint effusion"},{"ID": 198,"Name": "Joint instability"},{"ID": 27,"Name": "Joint pain"},{"ID": 230,"Name": "Joint redness"},  {"ID": 193,"Name": "Joint swelling"
  },  {"ID": 47,"Name": "Joylessness"  },  {"ID": 994,"Name": "Knee deformity"},{"ID": 256,"Name": "Knee pain"},{"ID": 146,"Name": "Leg cramps"},{"ID": 1010,"Name": "Leg pain"},{"ID": 231,
    "Name": "Leg swelling"},{"ID": 143,"Name": "Leg ulcer"},{"ID": 82,"Name": "Less than 3 defecations per week"},{"ID": 992,"Name": "Limited mobility of the ankle"},{"ID": 167,"Name": "Limited mobility of the back"},
  {"ID": 178,"Name": "Limited mobility of the fingers"},{"ID": 1000,"Name": "Limited mobility of the hip"},{"ID": 195,"Name": "Limited mobility of the leg"},{"ID": 35,"Name": "Lip swelling"},
  {"ID": 205,"Name": "Lockjaw"},{"ID": 210,"Name": "Loss of eye lashes"},{"ID": 174,"Name": "Lower abdominal pain"},{"ID": 263,"Name": "Lower-back pain"},{"ID": 261,"Name": "Lump in the breast"
  },{"ID": 266,"Name": "Malposition of the testicles"},{"ID": 232,"Name": "Marked veins"},{"ID": 235,"Name": "Memory gap"},{"ID": 112,"Name": "Menstruation disorder"},{"ID": 123,"Name": "Missed period"},
  {"ID": 215,"Name": "Moist and softened skin"},{"ID": 85,"Name": "Mood swings"},{"ID": 983,"Name": "Morning stiffness"},{"ID": 135,"Name": "Mouth pain"},{"ID": 97,"Name": "Mouth ulcers"},{"ID": 177,"Name": "Muscle pain"
  },{"ID": 119,"Name": "Muscle stiffness"},{"ID": 987,"Name": "Muscle weakness"},{"ID": 252,"Name": "Muscular atrophy in the leg"},{"ID": 202,"Name": "Muscular atrophy of the arm"},{"ID": 168,"Name": "Muscular weakness in the arm"},
  {"ID": 253,"Name": "Muscular weakness in the leg"},{"ID": 44,"Name": "Nausea"},{"ID": 136,"Name": "Neck pain"},{"ID": 234,"Name": "Neck stiffness"},{"ID": 114,"Name": "Nervousness"
  },{"ID": 133,"Name": "Night cough"},{"ID": 1004,
"Name": "Night sweats"},{"ID": 63,"Name": "Non-healing skin wound"},{"ID": 38,"Name": "Nosebleed"},{"ID": 221,"Name": "Numbness in the arm"},{"ID": 254,"Name": "Numbness in the leg"},
  {"ID": 200,"Name": "Numbness of the hands"},{"ID": 137,"Name": "Oversensitivity to light"},{"ID": 157,"Name": "Overweight"},{"ID": 155,"Name": "Pain in the bones"},
  {"ID": 142,"Name": "Pain in the calves"},{"ID": 12,"Name": "Pain in the limbs"},{"ID": 990,"Name": "Pain of the anus"},{"ID": 203,"Name": "Pain on swallowing"},{"ID": 251,"Name": "Pain radiating to the arm"
  },{"ID": 103,"Name": "Pain radiating to the leg"},{"ID": 286,"Name": "Pain when chewing"},{"ID": 189,"Name": "Painful defecation"},{"ID": 109,"Name": "Painful urination"},{"ID": 150,"Name": "Pallor"
  },{"ID": 37,"Name": "Palpitations"},{"ID": 140,"Name": "Paralysis"},{"ID": 118,"Name": "Physical inactivity"},{"ID": 129,"Name": "Problems with the sense of touch in the face"},{"ID": 130,
  "Name": "Problems with the sense of touch in the feet"},{"ID": 258,"Name": "Protrusion of the eyes"},{"ID": 172,"Name": "Purulent discharge from the urethra"},{"ID": 173,"Name": "Purulent discharge from the vagina"},
  {"ID": 191,"Name": "Rebound tenderness"},{"ID": 54,"Name": "Reduced appetite"},{"ID": 78,"Name": "Ringing in the ear"},{"ID": 14,"Name": "Runny nose"},{"ID": 975,"Name": "Sadness"},
  {"ID": 269,"Name": "Scalp redness"},{"ID": 1001,"Name": "Scar"},{"ID": 60,"Name": "Sensitivity to cold"},{"ID": 69,"Name": "Sensitivity to glare"},{"ID": 102,"Name": "Sensitivity to noise"},
  {"ID": 264,"Name": "Shiny red tongue"},{"ID": 29,"Name": "Shortness of breath"},{"ID": 183,"Name": "Side pain"},{"ID": 26,"Name": "Skin lesion"},{"ID": 25,"Name": "Skin nodules"},{"ID": 124,
"Name": "Skin rash"},{"ID": 61,"Name": "Skin redness"},{"ID": 217,"Name": "Skin thickening"},{"ID": 34,"Name": "Skin wheal"},{"ID": 241,"Name": "Sleepiness with spontaneous falling asleep"},{
"ID": 52,"Name": "Sleeplessness"},{"ID": 95,"Name": "Sneezing"},{"ID": 13,"Name": "Sore throat"},{"ID": 64,"Name": "Sputum"},{"ID": 179,"Name": "Stomach burning"},{"ID": 185,"Name": "Stress-related leg pain"},
  {"ID": 28,"Name": "Stuffy nose"},{"ID": 138,"Name": "Sweating"},{"ID": 236,"Name": "Swelling in the genital area"},{"ID": 267,"Name": "Swelling of the testicles"},{"ID": 248,"Name": "Swollen glands in the armpit"},
{"ID": 249,"Name": "Swollen glands in the groin"},{"ID": 169,"Name": "Swollen glands in the neck"},{"ID": 211,"Name": "Tears"},{"ID": 222,"Name": "Testicular pain"},{"ID": 243,"Name": "Tic"},
  {"ID": 201,"Name": "Tingling"},{"ID": 16,"Name": "Tiredness"},{"ID": 997,"Name": "Toe deformity"},{"ID": 1003,"Name": "Toe swelling"},{"ID": 980,"Name": "Tongue burning"},{"ID": 977,
"Name": "Tongue swelling"},{"ID": 1008,"Name": "Toothache"},{"ID": 115,"Name": "Tremor at rest"},{"ID": 132,"Name": "Tremor on movement"},{"ID": 988,"Name": "Trouble understanding speech"
  },{"ID": 144,"Name": "Unconsciousness, short"},{"ID": 265,"Name": "Uncontrolled defecation"},{"ID": 116,"Name": "Underweight"},{"ID": 160,"Name": "Urge to urinate"},{"ID": 161,"Name": "Urination during the night"},
  {"ID": 68,"Name": "Vision impairment"},{"ID": 213,"Name": "Vision impairment for far objects"},{"ID": 166,"Name": "Vision impairment for near objects"},{"ID": 66,"Name": "Visual field loss"},
  {"ID": 101,"Name": "Vomiting"},{"ID": 181,"Name": "Vomiting blood"},{"ID": 972,"Name": "Weakness or numbness on right or left side of body"},{"ID": 23,"Name": "Weight gain"},{"ID": 22,"Name": "Weight loss"
},{"ID": 30,"Name": "Wheezing"},{"ID": 187,"Name": "Wound"},{"ID": 105,"Name": "Yellow colored skin"},{"ID": 106,"Name": "Yellowish discoloration of the white part of the eye"}];



var bodyParts = ['abdomen', 'face', 'tooth', 'anus', 'back',' mouth', 'skin',
'bile', 'bladder', 'gum', 'lung', 'semen', 'urine', 'nose', 'bone', 'body',
'sputum', 'brain', 'breast', 'nail', 'butt', 'throat', 'lip', 'chest', 'foot',
'hand', 'penis', 'socket', 'elbow', 'heart', 'vagina', 'fat', 'lump', 'gallbladder', 'genital',
 'groin', 'hair', 'disc', 'hip', 'thyroid', 'nipple', 'jaw', 'joint', 'kidney', 'knee',
 'mood', 'leg', 'blood', 'testosterone', 'estrogen', 'fluid', 'lymph node',
 'muscle', 'ovaries', 'pancreas', 'pelvis', 'pregnancy', 'prostate', 'retina', 'spot', 'ear',
'cuff', 'ear', 'rectum', 'neck', 'tongue', 'tonsils', 'testicles', 'urine', 'cervix', 'wrist', 'mouth', 'nose', 'head','shoulder',
'armpit', 'eye'
];

 var painValue = 5;


var adjectives = ['abdominal pain', 'abnormal facial expressions', 'abscessed tooth', 'orthosis',
'absence of speech', 'acid reflux', 'acute sinusitis', 'adhd', 'macular degeneration', 'agoraphobia',
'alcohol poisoning', 'alcohol withdrawal', 'allergy', 'alport syndrome', 'altered mental status',
'dry socket', 'alzheimer', 'lazy eye', 'anaphylaxis', 'anemia', 'ankle pain', 'anorexia',
'anxiety', 'loss of speech', 'arm pain', 'asthma', 'astigmatism', 'autism', 'avian', 
'bad breath', 'bad taste', 'skin cancer', 'behavior', 'benign', 'bed wetting', 'bile cancer',
'cancer','bipolar', 'bird flu', 'bladder cancer', 'bladder infection', 'bleeding', 'bleeding gums',
'blisteds', 'blood clot', 'blood in semen', 'blood in urine', 'bloody nose',
'bloody sputum', 'blurred vision', 'bdd', 'bone loss', 'body dysmorphic disorder',
'borderline personality', 'bowel', 'aneurysm', 'brain cancer', 'tumor', 'trauma',
'breast pain', 'breast cancer', 'breast swelling', 'swollen breast', 'bulimia', 'bug bite', 
'burn', 'burning mouth', 'butt pain', 'burning urination', 'throat cancer', 'carbon monoxide',
'carcinoid', 'cardiomyopathy', 'carpal tunnel', 'cat scratch disease', 'cataract', 'catatonia', 
'cerebral palsy', 'cervical cancer', 'chalazion', 'chapped lips', 'chest pain', 'chest tightness',
'chickenpox', 'chills', 'clamydia', 'chronic fatigue', 'chronic pain', 'chronic sore throat', 
'cloudy urine', 'cold', 'cold feet', 'cold fingers', 'cold hands', 'color blind', 'wart', 
'consution', 'constipation', 'dermatitis', 'COPD', 'copd', 'joint cracking', 'cystic fibrosis',
'eye bags', 'dark circles', 'delusional', 'delusions', 'osteoporosis', 'dengue', 'depigmentation',
'depression', 'detachment', 'diabetes', 'diabetic', 'diarrhea', 'concentration', 'dry eye',
'dry mouth', 'dry socket', 'easy bruising', 'ebola', 'elbow pain', 'elevated blood sugar', 'blood sugar',
'emotional', 'unstable', 'enlarged heart', 'e. coli', 'euphoric', 'euphora', 'sweating', 'yawning', 'eye discharge',
'eye floaters', 'herpes', 'eye pain', 'eye twitch', 'eyestrain', 'fainting', 'farsighted', 'nearsighted',
'fatty liver', 'fecal', 'fever', 'fibromyalgia', 'finger pain', 'flaky scalp', 'flu', 
'fluctuating mood', 'food allergy', 'foreign', 'foot pain', 'frequent urination', 'gallbladder attack', 
'gallstones', 'gas', 'gastritis', 'stomach flu', 'genital warts', 'gingivitis', 'glaucoma', 'groin pain',
'gum disease', 'gum pain', 'hair loss', 'hairy tongue', 'hallucinations', 'headache', 'hearing loss', 
'heart attack', 'heart disease', 'heartburn', 'heel pain', 'heel', 'hepatitis', 'sex', 'std', 'hip pain', 
'HIV', 'AIDS', 'hyperactive', 'hyperthyroidism', 'hypothyroidism', 'wisdom tooth', 'impulsivity', 'increased appetite', 
'infertility', 'inflammation', 'cornea', 'larynx', 'sclera', 'insomnia', 'insulin', 'itchy', 'itch', 'jaundice', 
'joint pain', 'joint cracking', 'joint redness', 'kidney cancer', 'kidney failure', 'kidney infection', 
'kidney stone', 'knee pain', 'knee swelling', 'leg pain', 'leg sores', 'leg swwelling', 'leukemia', 
'liver cancer', 'taste', 'low blood pressure', 'high blood pressure', 'lump', 'lupus', 'cyst', 'malaria', 
'macular degeneration', 'malnutrition', 'measles', 'memory loss', 'meningitis', 'menopause', 'menstrual', 'menstrual cramps',
'mesothelioma', 'metallic taste', 'middle ear infection', 'migraine', 'miscarriage', 'mood swings', 'motor tics', 
'mouth sores', 'myeloma', 'scoliosis', 'sclerosis', 'mumps', 'muscle cramps', 'muscle pain', 'myopia', 'fungal',
'nail fungus', 'nail pitting', 'narcissistic', 'narcissism', 'grandiose', 'nasal congestion', 'nausea', 'neck pain', 'nipple pain', 
'numbness', 'OCD', 'oral cancer', 'osteoarthritis', 'arthritis', 'ovarian cancer', 'ovarian cyst', 'overactive bladder',
'paralyze', 'paralysis', 'painful gums', 'intercourse', 'pancreatic cancer', 'pancreatitis', 'paranoia', 'parkinson', 
'peeling skin', 'pelvic pain', 'penile discharge', 'penile itching', 'penile pain', 'pink eye', 'pneumonia', 'poison ivy',
'pregnancy', 'prostate cancer', 'ptosis', 'psoriasis', 'pulmonary fibrosis', 'rabies', 'rash', 'rectal bleeding', 'rectal pain',
'red gums', 'red spots', 'spots', 'spot', 'streaks', 'streak', 'red streak', 'reflux laryngitis', 'restless leg',
'ringing', 'ringing ears', 'rotator cuff injury', 'injured', 'injury', 'runny nose', 'scarlet fever', 'schizophrenia', 'seizures', 'seasonal', 
'self-neglect', 'shaking hands', 'shortness of breath', 'shoulder pain', 'sinus infection', 'sleep apnea', 'sneezing', 'snoring', 
'sore throat', 'sore tongue', 'spasticity', 'carcinoma', 'skin cancer', 'stiff neck', 'stomach cramps', 'stroke', 'strange behavior', 'suicide', 
'swimmers ear', 'swine flu', 'swollen ankles', 'swollen breast', 'swollen eyes', 'swollen gums', 'swollen joints', 
'swollen knee', 'swollen joints', 'swollen lymph nodes', 'swollen testicles', 'swollen tongue', 
'swollen tonsils', 'teen', 'testicular pain', 'testicular swelling', 'thirst', 'throat cancer', 'tic', 'chest tightness', 'toothache', 'torn ACL',
'tremor', 'tuberculosis', 'panic attack', 'tunnel vision', 'ulcerative colitis', 'unusual behavior', 'upper respiratory infection', 'urethra',
'urinary retention', 'urinary urgency', 'pee', 'poop', 'homicidal', 'defecate', 'urinate', 'period', 'vaginal bleeding', 'vaginal discharge', 
'vaginal dryness', 'vaginal itching', 'vaginal odor', 'vaginal pain', 'vaginal yeast infection', 'vaginitis', 'varicose veins', 'vertigo', 'vision loss'
, 'vomiting', 'vomiting blood', 'watery', 'watery eye', 'weight gain', 'weakness', 'weight loss', 'west nile virus', 'wheezing', 'wet', 'whooping cough', 
'pertussis', 'wrist pain', 'yawning', 'yawn', 'zika virus', 'addiction', 'acne', 'pimples', 'pimple', 'dizzy', 'dry mouth', 'sleepy', 'shortness of breath', 'thirsty',
'tired', 'weak', 'see', 'sleep', 'smell', 'speak', 'watery bowel', 'scratch', 'sweat', 'walk', 'write', 'aspergers', 'psychosis', 'body dysmorphic disorder', 'mood regulation', 
'thought disorder', 'obsessive compulsive disorder', 'erectile dysfunction'
];




       var testQuestions = ["What is your name? (If you would not like to disclose, type 'n/a'.)", "What is your Age?", "What is your gender? (M/F)", "What is your ethnicity?",
    "What is your height?", "What is your weight?", "What symptoms have you been experiencing?", "How long has this issue been occuring for?", "Are there any other symptoms that you have?",
    "How would you rate your pain?", "Do you have any family history of illnesses? If so, type the relation and the condition and age of onset. Example: <i>Aunt Breast Cancer, 35</i>", "Is there any other important information you would like to share?"];

    var elements = ["Name", "Age", "Gender", "Ethnicity", "Height", "Weight", "Symptoms", "Issue", "Any-Other", "Pain-Level", "Family History", "Other"]
    var AnswerArray = [];
    var queue = []; //make a queue containing the user responses


var wantStart = false;
var wantName = false;
var wantGender = false;
var wantEthnicity = false;
var wantHeight = false;
var wantWeight = false;
var wantSymptoms = false;
var wantIssue = false;
var wantMorePain = false;
var wantPain = false;
var wantFamilyHistory = false;
var wantOther = false;
var testComplete = false;


var isFull = false;
var surveyTurnedOn = false;
var surveyIndex = 0;
var array = [];
var testAnswers = [];
var sixthSense = false;
var response = "";
var painValue = 0;
var painArray = [];
var senorita = "wow my name is mary and i like pie particularly wolfs pie and shepards pie and since this thing is so damn annoying it demands a boatload of text to be happy.";
function getLocation(x) {
	if (navigator.geolocation) {
		navigator.geolocation.getCurrentPosition(showPosition);
	} else { 
		x.innerHTML = "Geolocation is not supported by this browser.";
	}
}
function showPosition(position, user) {
	var arrays = [position.coords.latitude, position.coords.longitude];
	array = arrays;
	return arrays;
}
var bio = "";
var bioArray = [];
var bioArray2 = [];
function say(){
	alert(bio);
}
function diCey(a){
	alert(bioArray[a]);
}
function diCey2(a){
	alert(bioArray2[a]);
}

 function saytheSymptom(){
  var valuey = document.getElementById("userBox2").value;
  document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">"+valuey+  "</div></div>"  + "<br><br>";
  queue.push({"Symptom" : valuey});
  console.log(queue);
 }

 function makeNext(a, b){
  a = false;
  b = true;
 }

function characterBreak(str){
	var final = "";
	var char = 0;
	for (var i = 0; i < str.length; i++) {
		char++;
		if(str.charAt(i) == " "){
			if((char >= 50) && (char <= 65)){
				final = final + str.charAt(i) + "<br>";
				char = 0;
			} else {
				final = final + str.charAt(i);
			}
		}

		else {
			final = final + str.charAt(i);
		}
	}

	return final;
}
function parsePhone(str){
	var number = "";
	for(var i = 0; i < str.length; i++){
		if(i == 2 || i == 5){
			number += str.charAt(i) + "-";
		} else {
			number += str.charAt(i);
		}
	}

	return number;
}
function parseBreak(str){
	var fin = "";
	for(var i = 0; i < str.length; i++){
		var j = i % 65;
		if((i == 60)){
			fin += "<br>";
		}
	}

	return fin;
}
var type11 = false;
var type12 = false;
var is2 = false;
var query = "";


 var want1 = false;
 var want2 = false;
 var want3 = false;
 var want4 = false;
 var want5 = false;
 var want6 = false;
 var want7 = false;
 var want8 = false;
 var want9 = false;
 var want10 = false;
 var want11 = false;


getLocation(document.getElementById("userBox"));
function gotoBottom(id){
   var element = document.getElementById(id);
   element.scrollTop = element.scrollHeight + 5000;
}

function myFunction() {
   var val = document.getElementById("slider").value; //gets the oninput value
  //displays this value to the html page
   //console.log(val);
   painArray.push(document.getElementById("slider").value);
   //console.log(queue);
}
function talk() {

 

  var username =  parent.document.URL.substring(parent.document.URL.indexOf('=') + 1, parent.document.URL.length);
  console.log(username);
	var user = document.getElementById("userBox").value;
	document.getElementById("userBox").value = "";
	document.getElementById("chat").innerHTML += "<div id = \"youLog\" class = \"chatting\">" + characterBreak(user) +  "</div>" + parseBreak(user) + "<br>";
	if (user == 1) {
		var string = "Which doctor are you looking for?<br> Press 11 if you are looking for a specific name. <br>ex. <i>David Smith</i><br>Press 12 if you are looking for a specific type of practicioner.<br> ex. <i>Cardiologist near me</i>"
		document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + string + "</div><br><br>";;
	} else if(user == 11){
		var string = "Type in the name of the practitioner you are searching for."
		document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + string + "</div><br>";
		type11 = true;
	} else if(user == 12){
		var string = "What type of practicioner are you looking for?"
		document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + string + "</div><br>";
		query = user;
		type12 = true;
	}
	else if(type11 == true){
		type11 = false;
		var string = "Nice Doctor name!";
		var separate = user.split(" ");
		var firstName = separate[0];
		var lastName = separate[1];
		var info = "";
		var other = "";
		var address = "";
		var phoneNumber = "";
		$.getJSON("https://api.betterdoctor.com/2016-03-01/doctors?first_name=" + firstName + "&last_name=" + lastName + "&skip=0&limit=10&user_key=afbd778310f54f209917a0810b0f8aed",
			function(data){
				bio = data.data[0].profile.bio;
				info += "Dr." +  data.data[0].profile.first_name + " " + data.data[0].profile.last_name + ", " + data.data[0].profile.title + "<br>" + data.data[0].specialties[0].name + "<br><br>";
				var datas = data.data[0];
				var quote ='"';
				if(datas.practices[0] != null){
					address = "<br>" + data.data[0].practices[0].visit_address.street + "<br>" + data.data[0].practices[0].visit_address.city + ", " + data.data[0].practices[0].visit_address.state + " " + data.data[0].practices[0].visit_address.zip + "<br>";
					phoneNumber =  data.data[0].practices[0].phones[0].number;
				}
				info += address;
				if(phoneNumber != undefined){
					info += "<br>"  + parsePhone(phoneNumber);
				}
				info += "<br><br><button class = \"description\" onclick = say()"   +  ">View Description </button>";
				document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + info + "</div>" + parseBreak(info) +  "<br><br>";

			});
	} else if(type12 == true){
		document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">Here is a list of doctors that serve in the area you searched for:</div><br>";
		type12 = false;
		var input = user;
		var latitude = array[0];
		var longitude = array[1];
		info = "";
		$.getJSON("https://api.betterdoctor.com/2016-03-01/doctors?query=" + user + "&location=" + latitude + "%2C%20" + longitude + "%2C50&skip=0&limit=10&user_key=afbd778310f54f209917a0810b0f8aed",
			function(data){

				for(var i = 0; i < 3; i++){
					info = "";
					bio = data.data[i].profile.bio;
					bioArray[i] = bio;
					console.log(data.data[i].profile.bio);
					info += "Dr." +  data.data[i].profile.first_name + " " + data.data[i].profile.last_name + ", " + data.data[i].profile.title + "<br>" +"<br><br>";
					var datas = data.data[i];
					var quote ='"';
					if(datas.practices[i] != null){
						address = "<br>" + data.data[i].practices[i].visit_address.street + "<br>" + data.data[i].practices[i].visit_address.city + ", " + data.data[i].practices[i].visit_address.state + " " + data.data[i].practices[i].visit_address.zip + "<br>";
						if(phoneNumber != undefined){
							phoneNumber =  data.data[i].practices[i].phones[i].number;
						}
					}
					info += address;
					if(phoneNumber != undefined){
						info += "<br>"  + parsePhone(phoneNumber);	
					}
					info += "<br><br><button class = \"description\" onclick = diCey(" + i + ")"   +  ">View Description </button>";
					document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + info + "</div>"  + "<br><br><br><br>";
				}
			});
	} else if(user == 2){

			var string = "What seems to be the problem you have been experiencing? Use one of the keywords, per <a href = \"symptomlist.html\"  target=\"_blank\"> SymptomList</a> the complete list of symptoms."
		document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + string + "</div><br>";
		
		is2 = true;

    for(var i = 0; i < symptomy.length; i++){
      document.getElementById("theDataList").innerHTML += "<option value =\"" + symptomy[i].Name + "\">";
    }

	} else if(is2 == true){



		var verifyArray = [];

		for(var i = 0; i < symptomy.length; i++){
			if(user.includes(symptomy[i].Name.toLowerCase())){
				console.log("Database: " + symptomy[i].Name + " " + symptomy[i].ID);
				verifyArray.push(symptomy[i].ID);
			}
		}

		for(var i = 0; i < bodyParts.length; i++){
			if(user.includes(bodyParts[i])){
				console.log(bodyParts[i]);
			}
			bodyString += " " + bodyParts[i];
		}

		var adjectiveArray = [];

		var adjString = "";
		var bodyString = "";
		for(var i = 0; i < adjectives.length; i++){
			if(user.includes(adjectives[i])){

				console.log(adjectives[i]);
				adjString += " " + adjectives[i];
			}
		}

		var tokens = "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImNocmlzdG9waGVyY2h1MDgxMDk4QGdtYWlsLmNvbSIsInJvbGUiOiJVc2VyIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvc2lkIjoiMjcwNCIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvdmVyc2lvbiI6IjEwOSIsImh0dHA6Ly9leGFtcGxlLm9yZy9jbGFpbXMvbGltaXQiOiIxMDAiLCJodHRwOi8vZXhhbXBsZS5vcmcvY2xhaW1zL21lbWJlcnNoaXAiOiJCYXNpYyIsImh0dHA6Ly9leGFtcGxlLm9yZy9jbGFpbXMvbGFuZ3VhZ2UiOiJlbi1nYiIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvZXhwaXJhdGlvbiI6IjIwOTktMTItMzEiLCJodHRwOi8vZXhhbXBsZS5vcmcvY2xhaW1zL21lbWJlcnNoaXBzdGFydCI6IjIwMTktMDctMTAiLCJpc3MiOiJodHRwczovL2F1dGhzZXJ2aWNlLnByaWFpZC5jaCIsImF1ZCI6Imh0dHBzOi8vaGVhbHRoc2VydmljZS5wcmlhaWQuY2giLCJleHAiOjE1NjM5OTgwNTIsIm5iZiI6MTU2Mzk5MDg1Mn0.ZDb34cs0kh-Wgt4g90uECYLRDPeh7DsxCkUGLanPYQU";


		var apimedicURL = "https://healthservice.priaid.ch/diagnosis?symptoms=[" + verifyArray+ "]&gender=male&year_of_birth=82&token=" + tokens + "&format=json&language=en-gb";


		if(verifyArray.length == 0){
			var badMessage = "I'm sorry, I cannot give you a diagnosis at this time. Please try again by <br>1. Typing a longer Description <br> 2. Using one of the keywords. Look in the <a href = \"symptomlist.html\">List of Symptoms </a> for more intormation"
			document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + badMessage + "</div>" + parseBreak(badMessage) +  "<br><br>";

		} else {
			$.getJSON(apimedicURL,
			function(data){
				var infos = "Based on the following information you have typed in, you may have the following illnesses:<br><br>";
				

				
				for(var i = 0; i < data.length; i++){
					console.log(data[i].Issue.ProfName + ": Extracted from database");
					infos += data[i].Issue.ProfName + "<br>";
				}

				infos += "<br>Keep note that this is not a diagnosis, see a medical professional for a more accurate opinion. ";

				$.getJSON("https://api.betterdoctor.com/2016-03-01/doctors?query=" + adjString + " " + bodyString+ "&location=" + array[0] + "%2C%20" + array[1] + "%2C50&skip=0&limit=10&user_key=afbd778310f54f209917a0810b0f8aed",
			function(data){
				document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + "Here are some suggested doctors based on your reported conditions: "+ "</div>"  + "<br><br>";

				for(var i = 0; i < 3; i++){
					info = "";
					bio = data.data[i].profile.bio;
					bioArray2[i] = bio;
					info += "Dr." +  data.data[i].profile.first_name + " " + data.data[i].profile.last_name + ", " + data.data[i].profile.title + "<br>" +"<br><br>";
					var datas = data.data[i];
					var quote ='"';
					if(datas.practices[i] != null){
						address = "<br>" + data.data[i].practices[i].visit_address.street + "<br>" + data.data[i].practices[i].visit_address.city + ", " + data.data[i].practices[i].visit_address.state + " " + data.data[i].practices[i].visit_address.zip + "<br>";
						if(phoneNumber != undefined){
							phoneNumber =  data.data[i].practices[i].phones[i].number;
						}
					}
					info += address;
					if(phoneNumber != undefined){
						info += "<br>"  + parsePhone(phoneNumber);	
					}
					info += "<br><br><button class = \"description\" onclick = diCey2(" + i + ")"   +  ">View Description </button>";
					document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + info + parseBreak(info) + "</div>"  + "<br><br>";
				}
			});


				

				document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + characterBreak(infos) + "</div>" + parseBreak(infos) +  "<br><br>";

			});	
		}

		
		



// 		console.log("sanity check");
			
// 			var firebaseConfig = {
//     apiKey: "AIzaSyBPvSqm_MaQhjpK7z0SUbn2ZbxD12MI-9k",
//     authDomain: "summerproject1-d1d7c.firebaseapp.com",
//     databaseURL: "https://summerproject1-d1d7c.firebaseio.com",
//     projectId: "summerproject1-d1d7c",
//     storageBucket: "",
//     messagingSenderId: "634559623742",
//     appId: "1:634559623742:web:882b27c70b1247c2"
//   };
//   firebase.initializeApp(firebaseConfig);
//   var database = firebase.database();
//   var ref = database.ref('Chat');
//      var data = {
//     corpus: user
//   };

//    ref.once("value")
//     .then(function(snapshot) {

//         ref.push(data);
//         alert("Data Pushed. Congrats :D");
// });

	is2 = false;

	} else if (user == 3){
    var testString = "Type any key if you can start the assessment.";
      document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + testString + parseBreak(testString) + "</div>"  + "<br><br>";
      wantStart = true;
} else if (wantStart){
  var question = "What is your name?"
  document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + question + parseBreak(question) + "</div>"  + "<br><br>";
    want1 = true;
  wantStart = false;
} else if (want1){
    //push the name to the queue
   queue.push({"Name": user});
  console.log(queue);
  var question = "What is your age?";
   document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + question + parseBreak(question) + "</div>"  + "<br><br>";
   want1 = false;
   want2 = true;
} else if (want2 == true){
  //push the age to the queue 
  queue.push({"Age": user});
  console.log(queue);
  var question = "What is your gender (M/F)?";
  document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + question + parseBreak(question) + "</div>"  + "<br><br>";
  want2 = false;
  want3 = true;
} else if (want3 == true){
  //push the gender to the queue 
  queue.push({"Age": user});
  console.log(queue);
  var question = "What is your ethnicity?";
  document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + question + parseBreak(question) + "</div>"  + "<br><br>";
  want3 = false;
  want4 = true;
} else if (want4 == true){
  //push the gender to the queue 
  queue.push({"Ethnicity": user});
  console.log(queue);
  var question = "What is your height?";
  document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + question + parseBreak(question) + "</div>"  + "<br><br>";
  want4= false;
  want5 = true;
} else if (want5 == true){
  //push the gender to the queue 
  queue.push({"Height": user});
  console.log(queue);
  var question = "What is your weight?";
  document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + question + parseBreak(question) + "</div>"  + "<br><br>";
  want5= false;
  want6 = true;
} else if (want6 == true){
  //push the weight to the queue 
  queue.push({"Weight": user});
  console.log(queue);
  var question = "What are your symptoms?<br>Type anything in the lower box when finished.";
  var symString = "";

 var newButton =  "<br><br><button class = \"description2\" onclick = saytheSymptom()"   +  "> Submit </button>";


var textBoxAdd = "<div class = \"response2\"><input id=\"userBox2\" type=\"text\" list=\"theDataList2\" placeholder = \"What seems to be bothering you?\" >";

  
  var dataList = "<datalist id = \"theDataList2\"></datalist>"

  document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + question + parseBreak(question) + "<br><br>" + textBoxAdd + dataList + newButton +  "</div></div>"  + "<br><br><br><br>";



   for(var i = 0; i < symptomy.length; i++){
      document.getElementById("theDataList2").innerHTML += "<option value =\"" + symptomy[i].Name + "\">";
    }



  want6= false;
  want7 = true;
} else if (want7 == true){
  var question = "How long have you been experiencing these symptoms?";
  document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + question + parseBreak(question) + "</div>"  + "<br><br>";
  want7= false;
  want8 = true;
} else if (want8 == true){
  var question = "How would you rate your pain?<br>Type anything in the box when you are finished.";

var myvar = '<div class = "box"><center><div id = "value"></div></center>'+
' </div>'+
' <div class = "containery">'+
'   <input type="range" min = "0" max = "10" value = "5" class = "slider" id = "slider" oninput="myFunction()">'+
' </div>'+
' <script type="text/javascript">'+
'   var slider = document.getElementById("slider");'+
'   var val = document.getElementById("value");'+
'   val.innerHTML = slider.value;'+
'   slider.oninput = function(){'+
'     val.innerHTML = this.value;'+
'   }'+
' </script>';


  

  document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + question + parseBreak(question) + myvar + "</div>"  + "<br><br>";
  want8= false;
  want9 = true;
} else if(want9 == true){
  //figure out how to extract the pain-level value here
   queue.push({"Pain": painArray.pop()});
 var question = "Do you have any family history of illnesses? If so, type the relation and the condition and age of onset. Example: <i>Aunt Breast Cancer, 35</i>";
   document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + question + parseBreak(question) + "</div>"  + "<br><br>";
   want9 = false;
   want10 = true; 
} else if(want10 == true){
  //store the family history here
   queue.push({"Family-History": user});
  console.log(queue);
  var question = "If there is any other important information to share, type it in the box below. If not, just type \'done\'";
  document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + question + parseBreak(question) + "</div>"  + "<br><br>";
  want10 = false;
  want11 = true;
} else if(want11 == true){
  var question = "Test Complete! See the Results and more options in the <i><strong>View my Stats</strong></i> section. Thank you for choosing cybeRx :)";
   document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + question + parseBreak(question) + "</div>"  + "<br><br>";
   want11 = false;
}
   
   
   



	else {

  //   var usernameyy =  parent.document.URL.substring(parent.document.URL.indexOf('=') + 1, parent.document.URL.length);
  //    var firebaseConfig = {
  //   apiKey: "AIzaSyBPvSqm_MaQhjpK7z0SUbn2ZbxD12MI-9k",
  //   authDomain: "summerproject1-d1d7c.firebaseapp.com",
  //   databaseURL: "https://summerproject1-d1d7c.firebaseio.com",
  //   projectId: "summerproject1-d1d7c",
  //   storageBucket: "",
  //   messagingSenderId: "634559623742",
  //   appId: "1:634559623742:web:882b27c70b1247c2"
  // };
  // firebase.initializeApp(firebaseConfig);
  // firebase.database().ref(username).set({
  //   AnswerArray;
  // });

		var neutral = "I'm sorry I can't parse your text properly Please try typing in one of the options, shown in the welcome statement.";
		document.getElementById("chat").innerHTML += "<div id = \"botLog\" class = \"chatting\">" + characterBreak(neutral) + "</div><br>";
	}

 


   gotoBottom("chat");

} 